<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Try On</title>
    
    <link rel="stylesheet" href="/static/segment.css">
    <link rel="stylesheet" href="/static/home.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="logo">Virtual Try On</div>
        <ul class="nav-links">
            <li><a href="/">Trang chủ</a></li>
            <li><a href="#features">Tính năng</a></li>
            <li><a href="#try-on">Thử nghiệm</a></li>
            <li><a href="#contact">Liên hệ</a></li>
        </ul>
    </nav>

    <!-- Try On Demo Section -->
    <section class="try-on-section" id="demo">
        <div class="demo-container">
            <h2 class="demo-title">Phân Đoạn Ảnh</h2>
            
            <div class="demo-interface">
                <form id="upload-form" style="display:flex;gap:40px;justify-content:center;align-items:flex-start;margin-top:40px;">
                    <div style="flex:1;min-width:340px;max-width:440px;">
                        <div style="position:relative;">
                            <span style="position:absolute;top:-18px;left:18px;background:#f5f5f5;color:#444;font-weight:600;padding:4px 16px;border-radius:8px;font-size:1.05em;box-shadow:0 2px 8px rgba(0,0,0,0.04);">Input</span>
                            <div id="input-area" style="background:#fff;border:2px dashed #e5b1b1;border-radius:18px;padding:0;text-align:center;min-height:400px;width:400px;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,0.06);">
                                <img id="input-img" src="" alt="Input" style="max-width:100%;max-height:100%;display:none;object-fit:contain;">
                                <div id="input-placeholder" style="color:#bbb;font-size:1.15em;text-align:center;">Drop Image Here<br>- or -<br>Click to Upload</div>
                                <input type="file" id="file" accept="image/*" style="display:none;">
                            </div>
                        </div>
                    </div>
                    <div style="flex:1;min-width:340px;max-width:440px;">
                        <div style="position:relative;">
                            <span style="position:absolute;top:-18px;left:18px;background:#f5f5f5;color:#444;font-weight:600;padding:4px 16px;border-radius:8px;font-size:1.05em;box-shadow:0 2px 8px rgba(0,0,0,0.04);">Output</span>
                            <div style="background:#fff;border:2px dashed #e5b1b1;border-radius:18px;padding:0;text-align:center;min-height:400px;width:400px;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,0.06);">
                                <img id="output-img" src="" alt="Output" style="max-width:100%;max-height:100%;display:none;object-fit:contain;">
                                <div id="output-placeholder" style="color:#bbb;font-size:1.15em;text-align:center;">No result yet</div>
                            </div>
                        </div>
                    </div>
                </form>
                <div style="text-align:center;margin-top:38px;">
                    <button class="btn" type="submit" form="upload-form" style="font-size:1.15em;padding:14px 38px;border-radius:12px;background:#f5b1b1;color:#fff;border:none;box-shadow:0 4px 18px #f5b1b1a0;cursor:pointer;font-weight:600;">Predict</button>
                    <button class="btn btn-secondary" type="button" onclick="resetDemo()" style="margin-left:16px;font-size:1.05em;padding:12px 32px;border-radius:10px;">Làm mới</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Sản Phẩm</h3>
                <ul>
                    <li><a href="#">VR Games</a></li>
                    <li><a href="#">AR Apps</a></li>
                    <li><a href="#">Giáo dục VR</a></li>
                    <li><a href="#">Enterprise</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Hỗ Trợ</h3>
                <ul>
                    <li><a href="#">Trung tâm trợ giúp</a></li>
                    <li><a href="#">Hướng dẫn</a></li>
                    <li><a href="#">Community</a></li>
                    <li><a href="#">Liên hệ</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Công Ty</h3>
                <ul>
                    <li><a href="#">Về chúng tôi</a></li>
                    <li><a href="#">Tuyển dụng</a></li>
                    <li><a href="#">Tin tức</a></li>
                    <li><a href="#">Đối tác</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Virtual Try On. Tất cả quyền được bảo lưu.</p>
        </div>
    </footer>

    <script>
        const fileInput = document.getElementById('file');
        const inputImg = document.getElementById('input-img');
        const outputImg = document.getElementById('output-img');
        const inputPlaceholder = document.getElementById('input-placeholder');
        const outputPlaceholder = document.getElementById('output-placeholder');
        const inputArea = document.getElementById('input-area');

        inputArea.addEventListener('click', () => {
            fileInput.click();
        });

        fileInput.addEventListener('change', (e) => {
            const f = e.target.files[0];
            if (f) {
                inputImg.src = URL.createObjectURL(f);
                inputImg.style.display = 'block';
                inputPlaceholder.style.display = 'none';
                outputImg.style.display = 'none';
                outputPlaceholder.style.display = 'block';
            } else {
                inputImg.style.display = 'none';
                inputPlaceholder.style.display = 'block';
            }
        });

        document.getElementById('upload-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const f = fileInput.files[0];
            if (!f) return;
            outputImg.style.display = 'none';
            outputPlaceholder.style.display = 'block';
            const fd = new FormData();
            fd.append('file', f);
            const res = await fetch('/predict', { method: 'POST', body: fd });
            const blob = await res.blob();
            outputImg.src = URL.createObjectURL(blob);
            outputImg.style.display = 'block';
            outputPlaceholder.style.display = 'none';
        });

        function resetDemo() {
            inputImg.src = '';
            outputImg.src = '';
            inputImg.style.display = 'none';
            outputImg.style.display = 'none';
            inputPlaceholder.style.display = 'block';
            outputPlaceholder.style.display = 'block';
            fileInput.value = '';
        }

        // Add smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>